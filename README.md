好的，这是一个面向用户的中文 README，旨在帮助用户理解和使用这个 Misskey Userscript。

***

# Misskey 实例过滤器 (Timeline Instance Filter)

这是一个为 Misskey 设计的浏览器用户脚本 (Userscript)，它可以让你在浏览全局时间线 (GTL) 或社交时间线 (STL) 时，只看你感兴趣的实例（服务器）上的内容。

如果你觉得时间线上无关信息太多，只想关注特定圈子的讨论，这个脚本会非常有用。它通过一个“白名单”系统工作，只有在名单上的实例发布的内容才会被显示。

## 🛡️ 关于权限与隐私安全的说明

### 为什么脚本需要 "读取所有网站数据" 的权限？

您在安装本脚本时，浏览器扩展（如 Tampermonkey）可能会提示脚本试图访问 **所有网站** (`*://*/*`)。请不要担心，这并不是为了监控您的浏览记录，而是为了实现**智能识别功能**。

由于 Misskey/Firefish 实例分布在成千上万个不同的域名下（例如 `misskey.io`, `wxw.moe` 等），脚本无法预知您访问的哪个网站是 Misskey 实例。因此，它需要一种机制来“看一眼”当前网站是不是 Misskey。

* **通俗解释**：脚本就像一个站在门口的检票员。为了确认这是否是 Misskey 网站，它需要看一眼每个网站的“门牌号”（网页头部的 Meta 标签）。
    * 如果发现是 Misskey，脚本才会正式启动工作。
    * 如果发现是 Google、百度或银行网站，脚本会**立即停止运行**，不执行任何操作。

### 🔒 隐私保护方案

本脚本严格遵守隐私安全原则，即使拥有全局匹配权限，也绝不会滥用：

1. **静默检测，用完即走**：
   在非 Misskey 网站上，脚本仅读取网页头部（`<head>`）极少量的代码用于身份核对，一旦确认不是目标网站，立刻通过 `return` 终止运行，不会驻留内存，也不会读取您的正文内容、密码或输入信息。

2. **零数据上传**：
   脚本**没有任何**将数据上传到第三方服务器的代码。所有过滤、设置保存都在您的本地浏览器（Local Storage）完成。

3. **开源透明**：
   本项目的完整源代码均托管在 GitHub 上，每一行代码都是公开可见的。任何有代码基础的人都可以审计代码，确保没有隐藏的恶意行为。

> **给极度注重隐私用户的建议**：
> 如果您仍然不希望脚本在所有网站运行，您可以手动在脚本管理器（Tampermonkey）的设置页面，将“用户匹配 (User Matches)”修改为您常用的 Misskey 实例域名。但这会导致脚本失去自动识别新实例的能力。

## ✨ 主要功能

* **实例白名单过滤**: 你可以创建一个域名列表，只有这些实例上的帖子才会出现在你的时间线里。
* **智能翻页加载**: 当一整页内容都被过滤掉时，脚本会自动加载下一页，直到找到符合条件的帖子或者达到设定的上限，避免了手动滚动的烦恼。
* **友好设置界面**: 在 Misskey 页面的右下角会有一个悬浮按钮，点击即可打开设置面板，方便你随时修改白名单和其它选项。
* **最近拦截列表**: 脚本会自动记录最近被拦截的实例域名，你可以轻松地从中选择并一键添加到白名单。
* **部分匹配与通配符搜索**: 在“最近拦截列表”中，你可以通过输入部分域名或使用 `*` 通配符来快速查找你想添加的实例。
* **多语言支持**: 脚本界面支持简体中文、日文和英文，并可以自动检测浏览器语言。

## 🔧 如何安装和使用

### 步骤 1: 安装用户脚本管理器

要使用这个脚本，你首先需要在你的浏览器上安装一个用户脚本管理器扩展。推荐使用 **Tampermonkey**。

* [Tampermonkey for Chrome](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo)
* [Tampermonkey for Firefox](https://addons.mozilla.org/firefox/addon/tampermonkey/)
* [Tampermonkey for Edge](https://microsoftedge.microsoft.com/addons/detail/tampermonkey/iikmkjmpaadaobahmlepeloendndfphd)

### 步骤 2: 安装本脚本

点击下方的链接，Tampermonkey 会自动弹出安装页面，点击“安装”即可。

> **[安装 Misskey 实例过滤器](https://greasyfork.org/scripts/XXXXX-misskey-timeline-instance-filter)**  *(这里会是脚本的实际安装地址)*

### 步骤 3: 进行设置

1. 安装完成后，打开你的 Misskey 网站。
2. 在页面的右下角，你会看到一个新的悬浮按钮 **⚙️**。
3. 点击这个按钮，会弹出“实例过滤器”的设置面板。

*(这是一个图片占位符, 实际应替换为截图)*

### 步骤 4: 配置你的白名单

1. 在设置面板中，找到文本框区域。这里就是你的 **实例白名单**。
2. 在文本框中，**每行输入一个** 你想看的实例的域名。例如：
   ```
   misskey.io
   mstdn.jp
   pawoo.net
   ```
3. 你当前所在的实例域名会自动被添加到白名单中，无需手动添加。

## ⚙️ 选项说明

* **实例白名单列表**: 这是核心功能区。在这里添加你信任或感兴趣的实例域名。不在这个列表里的实例发布的内容，都会被自动隐藏。
* **最近拦截的实例**:
    * 这个区域会显示那些因为不在白名单上而被脚本自动隐藏的实例。
    * 你可以通过顶部的**搜索框**快速查找特定实例。
    * 勾选 **通配符 (*)** 选项后，可以在搜索时使用 `*` 作为任意字符的替代，例如 `*.jp` 可以匹配所有以 `.jp` 结尾的日本实例。
    * 点击每个实例域名旁边的 **“添加 +”** 按钮，可以快速将其加入到上方的白名单中。
* **界面语言**: 你可以指定脚本界面的语言，或者选择“自动检测”让它跟随你的浏览器设置。
* **自动翻页上限**: 当脚本发现当前页面所有内容都被过滤后，它会自动去加载下一页。这个数值设定了它最多连续自动翻页多少次。这可以防止在内容非常稀疏的情况下陷入无限加载。
* **调试模式**: 只有开发者需要关心这个选项。开启后，浏览器的控制台会输出脚本的运行日志，方便排查问题。
* **保存并重载**: 点击后会保存你的所有设置，并刷新页面让其生效。
* **取消**: 关闭设置面板，不保存任何更改。

## ❓ 常见问题 (FAQ)

**问: 什么是“实例”？**
答: Misskey 是一个去中心化的社交网络，由许多独立的服务器（网站）组成，这些服务器就叫做“实例”。用户可以在不同的实例上注册，但它们之间可以相互交流。全局时间线（GTL）会显示来自不同实例的公开帖子。

**问: 这个脚本会影响我关注的人的帖子吗？**
答: 不会。这个脚本主要作用于全局时间线 (GTL) 和社交时间线 (STL)。它不会过滤你的主页时间线 (HTL)、列表或你直接访问用户个人主页时看到的内容。

**问: 我添加了白名单，但感觉时间线上的帖子变少了？**
答: 这是正常现象。因为脚本已经为你过滤掉了所有不在白名单上的实例内容。如果觉得内容太少，可以尝试通过“最近拦截的实例”功能，发现并添加更多你感兴趣的实例到白名单中。

**问: 我可以临时禁用这个脚本吗？**
答: 可以。在浏览器的 Tampermonkey 扩展菜单中，可以找到已安装的脚本列表，在那里可以暂时关闭“Misskey 实例过滤器”。

***

希望这个脚本能帮助你获得更清爽、更高效的 Misskey 浏览体验！
