[中文](./README.md) | [English](./README_en.md) | [日本語](./README_jp.md)

---

# Misskey 实例过滤器 (Timeline Instance Filter)

这是一个为 Misskey 设计的浏览器用户脚本 (Userscript)，它可以让你在浏览全局时间线 (GTL) 或社交时间线 (STL) 时，只看你感兴趣的实例（服务器）上的内容。

如果你觉得时间线上无关信息太多，只想关注特定圈子的讨论，这个脚本会非常有用。它通过一个“白名单”系统工作，只有在名单上的实例发布的内容才会被显示。

> **给极度注重隐私用户的建议**（[隐私说明](#privacy)）：
> 如果您不希望脚本在所有网站运行，您可以手动在脚本管理器（Tampermonkey）的设置页面，将“用户匹配 (User Matches)”修改为您常用的 Misskey 实例域名。但这会导致脚本失去自动识别新实例的能力。

## ✨ 主要功能

* **实例白名单过滤**: 只有你手动添加到名单中的实例内容才会被显示。
* **隐藏本地内容**: 提供独立开关，你可以选择隐藏当前所在实例的帖子，专注于探索外部实例。
* **智能翻页加载**: 当一整页内容都被过滤掉时，脚本会自动加载下一页，直到找到符合条件的帖子或者达到设定的上限（最高 10 页），避免了手动滚动的烦恼。
* **最近拦截列表 & 实时联动**:
    * 脚本会自动记录最近被拦截的实例域名。
    * **实时反馈**：当你在白名单编辑框中输入域名时，下方的拦截列表会实时刷新，自动移除已加入白名单的域名。
* **通配符搜索**: 支持在“最近拦截列表”中使用 `*` 通配符（如 `*.jp`）快速定位特定后缀的实例。
* **多语言支持**: 界面支持简体中文、日文和英文，并可自动检测浏览器语言。
* **轻量化设计**: 仅在识别到 Misskey 实例时运行，不占用多余系统资源。

## 🔧 如何安装

1. **安装用户脚本管理器**: 推荐使用 [Tampermonkey](https://www.tampermonkey.net/)。
2. **安装脚本**:
   > **[点击此处从 GreasyFork 安装](https://greasyfork.org/scripts/XXXXX)** *(请替换为实际发布的链接)*
3. **刷新页面**: 安装后打开任意 Misskey 实例，右下角将出现 **⚙️** 悬浮按钮。

## ⚙️ 选项说明

* **实例白名单列表**: 每行输入一个域名（如 `misskey.io`）。
* **最近拦截的实例**: 显示最近被隐藏的来源。点击 **“添加 +”** 可快速将该实例加入白名单。
* **隐藏本地内容**:
    * **关闭（默认）**：显示当前实例内容 + 白名单实例内容。
    * **开启**：隐藏所有本地帖子，仅显示白名单中的远程实例内容。
* **自动翻页上限**: 设定脚本在内容稀疏时连续自动抓取的最大页数（0-10）。
* **调试模式**: 开启后可在浏览器控制台（F12）查看详细的过滤日志。

<a name="privacy"></a>

## 🛡️ 权限与隐私说明

### 为什么需要 "访问所有网站" 的权限？

由于 Misskey 实例分布在成千上万个不同的域名下，脚本需要通过读取网页头部的 `meta` 标签来确认当前网站是否为 Misskey。

1. **静默检测**: 脚本仅在页面加载时检测一次。如果当前网站不是 Misskey，脚本会立即彻底终止运行。
2. **零数据上传**: 所有过滤逻辑和白名单数据均保存在您的浏览器本地（`GM_setValue`），**绝不会**向任何服务器上传您的浏览记录或个人信息。
3. **完全开源**: 您可以随时在 GitHub 上查看并审计本脚本的每一行源代码。

## 🔗 项目链接

如果您觉得这个脚本有帮助，欢迎通过以下方式支持：

* **项目主页**: [📦 GitHub Repository](https://github.com/Jarvie8176/misskey-instance-filter)
* **问题反馈**: [🐛 提交 Issue](https://github.com/Jarvie8176/misskey-instance-filter/issues)
* **支持作者**: [☕ 在 Ko-fi 上请我喝杯咖啡](https://ko-fi.com/jk433552)

## ❓ 常见问题 (FAQ)

**问: 什么是“实例”？**
答: Misskey 是一个去中心化的社交网络，由许多独立的服务器（网站）组成，这些服务器就叫做“实例”。用户可以在不同的实例上注册，但它们之间可以相互交流。全局时间线（GTL）会显示来自不同实例的公开帖子。

**问: 这个脚本会影响我关注的人的帖子吗？**
答: 不会。这个脚本主要作用于全局时间线 (GTL) 和社交时间线 (STL)。它不会过滤你的主页时间线 (HTL)、列表或你直接访问用户个人主页时看到的内容。

**问: 我添加了白名单，但感觉时间线上的帖子变少了？**
答: 这是正常现象。因为脚本已经为你过滤掉了所有不在白名单上的实例内容。如果觉得内容太少，可以尝试通过“最近拦截的实例”功能，发现并添加更多你感兴趣的实例到白名单中。

**问: 我可以临时禁用这个脚本吗？**
答: 可以。在浏览器的 Tampermonkey 扩展菜单中，可以找到已安装的脚本列表，在那里可以暂时关闭“Misskey 实例过滤器”。

---

*License: [MIT](https://github.com/Jarvie8176/misskey-instance-filter/blob/main/LICENSE)*
