[中文](./README.md) | [English](./README_en.md) | [日本語](./README_jp.md)

---

# Misskey インスタンスフィルター (Timeline Instance Filter)

これは Misskey 用に設計されたブラウザユーザースクリプト (Userscript) です。グローバルタイムライン (GTL) やソーシャルタイムライン (STL) を閲覧する際に、興味のある特定のインスタンス（サーバー）の投稿だけを表示するようにできます。

タイムラインに無関係な情報が多すぎると感じたり、特定のコミュニティの議論だけに集中したい場合に非常に便利です。このスクリプトは「ホワイトリスト」システムを採用しており、リストに追加されたインスタンスからの投稿のみが表示されます。

> **プライバシーを非常に重視するユーザーへの提案**（[プライバシーについて](#privacy)）：
> スクリプトがすべてのウェブサイトで実行されることを望まない場合、スクリプトマネージャー（Tampermonkeyなど）の設定ページで、「ユーザーマッチ (User Matches)」を手動で常用している Misskey
> インスタンスのドメインに変更することができます。ただし、これにより新しいインスタンスを自動的に識別する機能は失われます。

## ✨ 主な機能

* **インスタンスホワイトリストフィルタリング**: 手動でリストに追加したインスタンスのコンテンツのみが表示されます。
* **ローカルコンテンツを非表示**: 独立したスイッチを提供しており、現在閲覧しているインスタンス（ローカル）の投稿を非表示にし、外部インスタンスの探索に集中することができます。
* **スマートページ読み込み**: ページ内のすべてのコンテンツがフィルターで除外された場合、条件に合う投稿が見つかるか、設定された上限（最大10ページ）に達するまで、スクリプトが自動的に次のページを読み込みます。これにより、手動でスクロールし続ける手間が省けます。
* **最近ブロックされたリスト & リアルタイム連動**:
* スクリプトは、最近ブロック（非表示に）されたインスタンスのドメインを自動的に記録します。
* **リアルタイムフィードバック**：ホワイトリストの編集ボックスにドメインを入力すると、下のブロックリストがリアルタイムで更新され、ホワイトリストに追加済みのドメインは自動的に削除されます。
* **ワイルドカード検索**: 「最近ブロックされたリスト」内での検索に `*` ワイルドカード（例：`*.jp`）を使用でき、特定の接尾辞を持つインスタンスを素早く特定できます。
* **多言語サポート**: インターフェースは簡体字中国語、日本語、英語に対応しており、ブラウザの言語設定を自動的に検出します。
* **軽量設計**: Misskey インスタンスを認識したときのみ動作し、余分なシステムリソースを消費しません。

## 🔧 インストール方法

1. **ユーザースクリプトマネージャーのインストール**: [Tampermonkey](https://www.tampermonkey.net/) の使用を推奨します。
2. **スクリプトのインストール**:

> **[ここをクリックして GreasyFork からインストール](https://greasyfork.org/scripts/XXXXX)** *(実際の公開リンクに置き換えてください)*

3. **ページの更新**: インストール後、任意の Misskey インスタンスを開くと、右下に **⚙️** (設定) フローティングボタンが表示されます。

## ⚙️ オプション説明

* **インスタンスホワイトリスト**: ドメインを1行に1つずつ入力します（例：`misskey.io`）。
* **最近ブロックされたインスタンス**: 最近非表示にされた投稿元を表示します。**「追加 +」** をクリックすると、そのインスタンスを素早くホワイトリストに追加できます。
* **ローカルコンテンツを非表示**:
    * **オフ（デフォルト）**：現在のインスタンスのコンテンツ ＋ ホワイトリストのインスタンスコンテンツを表示します。
    * **オン**：すべてのローカル投稿を非表示にし、ホワイトリストにあるリモートインスタンスのコンテンツのみを表示します。
* **自動読み込みページ上限**: コンテンツが少ない（フィルタリングされた）場合に、スクリプトが連続して自動取得する最大ページ数を設定します（0-10）。
* **デバッグモード**: オンにすると、ブラウザのコンソール（F12）で詳細なフィルタリングログを確認できます。

<a name="privacy"></a>

## 🛡️ 権限とプライバシーについて

### なぜ「すべてのウェブサイトへのアクセス」権限が必要なのですか？

Misskey インスタンスは何千もの異なるドメインに分散しているため、スクリプトはWebページのヘッダーにある `meta` タグを読み取って、現在のサイトが Misskey であるかどうかを確認する必要があります。

1. **静的検出**: スクリプトはページ読み込み時に一度だけ検出を行います。現在のサイトが Misskey でない場合、スクリプトは即座に動作を完全に停止します。
2. **データアップロードなし**: すべてのフィルタリングロジックとホワイトリストデータはブラウザのローカル（`GM_setValue`）に保存され、閲覧履歴や個人情報をサーバーにアップロードすることは**決してありません
   **。
3. **完全オープンソース**: GitHub 上でいつでもこのスクリプトのソースコードを確認・監査することができます。

## 🔗 プロジェクトリンク

このスクリプトが役立つと感じた場合は、以下の方法でサポートしていただけると嬉しいです：

* **プロジェクトホームページ**: [📦 GitHub Repository](https://github.com/Jarvie8176/misskey-instance-filter)
* **問題の報告 (Issue)**: [🐛 Issue を送信](https://github.com/Jarvie8176/misskey-instance-filter/issues)
* **作者をサポート**: [☕ Ko-fi でコーヒーを奢る](https://ko-fi.com/jk433552)

## ❓ よくある質問 (FAQ)

**Q: 「インスタンス」とは何ですか？**
A: Misskey は分散型ソーシャルネットワークであり、多くの独立したサーバー（Webサイト）で構成されています。これらのサーバーを「インスタンス」と呼びます。ユーザーは異なるインスタンスに登録できますが、相互に交流することが可能です。グローバルタイムライン（GTL）には、様々なインスタンスからの公開投稿が表示されます。

**Q: このスクリプトはフォローしている人の投稿に影響しますか？**
A: いいえ。このスクリプトは主にグローバルタイムライン (GTL) とソーシャルタイムライン (STL) に作用します。ホームタイムライン (HTL)、リスト、またはユーザーのプロフィールページに直接アクセスして表示されるコンテンツをフィルタリングすることはありません。

**Q: ホワイトリストを追加しましたが、タイムラインの投稿が減った気がします。**
A: それは正常な動作です。スクリプトがホワイトリストにないすべてのインスタンスのコンテンツを除外しているためです。コンテンツが少なすぎると感じる場合は、「最近ブロックされたインスタンス」機能を使って、興味のあるインスタンスを見つけてホワイトリストに追加してみてください。

**Q: このスクリプトを一時的に無効にすることはできますか？**
A: はい。ブラウザの Tampermonkey 拡張機能メニューから、インストール済みスクリプトのリストを開き、そこで「Misskey Instance Filter」を一時的にオフにすることができます。

---

*License: [MIT*](https://github.com/Jarvie8176/misskey-instance-filter/blob/main/LICENSE)
